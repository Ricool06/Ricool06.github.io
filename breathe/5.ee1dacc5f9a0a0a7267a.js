(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{lz9Z:function(t,n,e){"use strict";e.r(n);var o=e("CcnG"),i=function(){return function(){}}(),a=e("pMnS"),l=e("4R65"),r=e("0/uQ"),s=e("mrSG"),u=e("MGBS"),c=e("zotm"),p=function(){function t(t,n){this.keySelector=t,this.flushes=n}return t.prototype.call=function(t,n){return n.subscribe(new d(t,this.keySelector,this.flushes))},t}(),d=function(t){function n(n,e,o){var i=t.call(this,n)||this;return i.keySelector=e,i.values=new Set,o&&i.add(Object(c.a)(i,o)),i}return s.c(n,t),n.prototype.notifyNext=function(t,n,e,o,i){this.values.clear()},n.prototype.notifyError=function(t,n){this._error(t)},n.prototype._next=function(t){this.keySelector?this._useKeySelector(t):this._finalizeNext(t,t)},n.prototype._useKeySelector=function(t){var n,e=this.destination;try{n=this.keySelector(t)}catch(o){return void e.error(o)}this._finalizeNext(n,t)},n.prototype._finalizeNext=function(t,n){var e=this.values;e.has(t)||(e.add(t),this.destination.next(n))},n}(u.a),b=e("VnD/"),h=e("jvbL"),f=function(){function t(){this.mapBounds=new o.m,this.clickedLocationResult=new o.m,this.circles=new Map}return t.prototype.ngOnInit=function(){var t=this;this.leafletMap=l.map("map").setView([51.4545,-2.5879],13),l.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:'\xa9 <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'}).addTo(this.leafletMap),this.leafletMap.on("moveend",function(){return t.mapBounds.emit(t.leafletMap.getBounds())}),this.mapBounds.emit(this.leafletMap.getBounds())},t.prototype.ngOnChanges=function(t){this.createNewCircles(t.locationResults.currentValue||[])},t.prototype.createNewCircles=function(t){var n,e=this;Object(r.a)(t).pipe((n=function(t){return t.coordinates.latitude+","+t.coordinates.longitude},function(t){return t.lift(new p(n,void 0))}),Object(b.a)(function(t){return 0===e.circles.size||!e.alreadyHasCircle(t)}),Object(h.a)(function(n){return n!==t[t.length]})).subscribe(function(t){return e.addCircleForLocationResult(t)})},t.prototype.alreadyHasCircle=function(t){var n=this;return Array.from(this.circles.keys()).some(function(e){return n.isAtCircle(t,e)})},t.prototype.isAtCircle=function(t,n){var e=this.convertCoordinatesToLatLng(t.coordinates);return!n||n.getLatLng().equals(e)},t.prototype.addCircleForLocationResult=function(t){var n=this.convertCoordinatesToLatLng(t.coordinates),e=l.circle(n,{color:"red",fillColor:"#f03",fillOpacity:.5,radius:500});e.on("click",this.onCircleClick.bind(this)),e.addTo(this.leafletMap),this.circles.set(e,t)},t.prototype.convertCoordinatesToLatLng=function(t){return new l.LatLng(t.latitude,t.longitude)},t.prototype.onCircleClick=function(t){this.clickedLocationResult.emit(this.circles.get(t.target))},t}(),m=o.rb({encapsulation:0,styles:[["#map[_ngcontent-%COMP%]{height:100vh}"]],data:{}});function y(t){return o.Jb(0,[(t()(),o.tb(0,0,null,null,0,"div",[["id","map"]],null,null,null,null,null))],null,null)}var g=e("Ip0R"),v=e("IGZg"),w=e("yGQT"),C=e("5d9E"),x=e("boBR"),k=function(){function t(t,n){this.store=t,this.bottomSheet=n,this.locationResults$=this.store.pipe(Object(w.y)(v.a))}return t.prototype.ngOnInit=function(){},t.prototype.onMapBoundsChange=function(t){var n=t.getCenter(),e=n.distanceTo(t.getNorthWest());this.store.dispatch(new C.b({coordinates:n,radius:e}))},t.prototype.onLocationResultClicked=function(t){this.bottomSheet.open(x.a,{panelClass:"location-result-data-sheet",data:t})},t}(),A=e("BgWK"),L=o.rb({encapsulation:0,styles:[[""]],data:{}});function B(t){return o.Jb(0,[(t()(),o.tb(0,0,null,null,2,"app-map-view",[],null,[[null,"mapBounds"],[null,"clickedLocationResult"]],function(t,n,e){var o=!0,i=t.component;return"mapBounds"===n&&(o=!1!==i.onMapBoundsChange(e)&&o),"clickedLocationResult"===n&&(o=!1!==i.onLocationResultClicked(e)&&o),o},y,m)),o.sb(1,638976,null,0,f,[],{locationResults:[0,"locationResults"]},{mapBounds:"mapBounds",clickedLocationResult:"clickedLocationResult"}),o.Cb(131072,g.b,[o.h])],function(t,n){var e=n.component;t(n,1,0,o.Ib(n,1,0,o.Bb(n,2).transform(e.locationResults$)))},null)}function S(t){return o.Jb(0,[(t()(),o.tb(0,0,null,null,1,"app-map",[],null,null,null,B,L)),o.sb(1,114688,null,0,k,[w.l,A.b],null,null)],function(t,n){t(n,1,0)},null)}var R=o.pb("app-map",k,S,{},{},[]),M=e("eDkP"),j=e("Fzqc"),z=e("4c35"),O=e("dWZg"),_=e("qAlS"),J=e("Wf4p"),N=e("ZYjt"),T=e("lLAP"),G=e("vGXY"),F=o.rb({encapsulation:2,styles:[".mat-bottom-sheet-container{padding:8px 16px;min-width:100vw;box-sizing:border-box;display:block;outline:0;max-height:80vh;overflow:auto}@media (-ms-high-contrast:active){.mat-bottom-sheet-container{outline:1px solid}}.mat-bottom-sheet-container-large,.mat-bottom-sheet-container-medium,.mat-bottom-sheet-container-xlarge{border-top-left-radius:4px;border-top-right-radius:4px}.mat-bottom-sheet-container-medium{min-width:384px;max-width:calc(100vw - 128px)}.mat-bottom-sheet-container-large{min-width:512px;max-width:calc(100vw - 256px)}.mat-bottom-sheet-container-xlarge{min-width:576px;max-width:calc(100vw - 384px)}"],data:{animation:[{type:7,name:"state",definitions:[{type:0,name:"void, hidden",styles:{type:6,styles:{transform:"translateY(100%)"},offset:null},options:void 0},{type:0,name:"visible",styles:{type:6,styles:{transform:"translateY(0%)"},offset:null},options:void 0},{type:1,expr:"visible => void, visible => hidden",animation:{type:4,styles:null,timings:"375ms cubic-bezier(0.4,0.0,1,1)"},options:null},{type:1,expr:"void => visible",animation:{type:4,styles:null,timings:"195ms cubic-bezier(0.0,0.0,0.2,1)"},options:null}],options:{}}]}});function I(t){return o.Jb(0,[(t()(),o.kb(0,null,null,0))],null,null)}function Y(t){return o.Jb(2,[o.Fb(402653184,1,{_portalOutlet:0}),(t()(),o.kb(16777216,null,null,1,null,I)),o.sb(2,212992,[[1,4]],0,z.b,[o.j,o.S],{portal:[0,"portal"]},null)],function(t,n){t(n,2,0,"")},null)}function Z(t){return o.Jb(0,[(t()(),o.tb(0,0,null,null,1,"mat-bottom-sheet-container",[["aria-modal","true"],["class","mat-bottom-sheet-container"],["role","dialog"],["tabindex","-1"]],[[1,"aria-label",0],[40,"@state",0]],[["component","@state.start"],["component","@state.done"]],function(t,n,e){var i=!0;return"component:@state.start"===n&&(i=!1!==o.Bb(t,1)._onAnimationStart(e)&&i),"component:@state.done"===n&&(i=!1!==o.Bb(t,1)._onAnimationDone(e)&&i),i},Y,F)),o.sb(1,180224,null,0,A.d,[o.k,o.h,T.b,G.a,[2,g.d],A.c],null,null)],null,function(t,n){t(n,0,0,null==o.Bb(n,1).bottomSheetConfig?null:o.Bb(n,1).bottomSheetConfig.ariaLabel,o.Bb(n,1)._animationState)})}var q=o.pb("mat-bottom-sheet-container",A.d,Z,{},{},[]),W=e("ZYCi"),D=function(){return function(){}}();e.d(n,"MapModuleNgFactory",function(){return K});var K=o.qb(i,[],function(t){return o.zb([o.Ab(512,o.j,o.fb,[[8,[a.a,R,q]],[3,o.j],o.A]),o.Ab(4608,g.k,g.j,[o.w,[2,g.s]]),o.Ab(4608,M.a,M.a,[M.g,M.c,o.j,M.f,M.d,o.s,o.C,g.d,j.b,[2,g.g]]),o.Ab(5120,M.h,M.i,[M.a]),o.Ab(1073742336,g.c,g.c,[]),o.Ab(1073742336,W.l,W.l,[[2,W.r],[2,W.k]]),o.Ab(1073742336,D,D,[]),o.Ab(1073742336,j.a,j.a,[]),o.Ab(1073742336,z.f,z.f,[]),o.Ab(1073742336,O.b,O.b,[]),o.Ab(1073742336,_.b,_.b,[]),o.Ab(1073742336,M.e,M.e,[]),o.Ab(1073742336,J.f,J.f,[[2,J.d],[2,N.g]]),o.Ab(1073742336,A.e,A.e,[]),o.Ab(1073742336,i,i,[]),o.Ab(1024,W.i,function(){return[[{path:"",component:k}]]},[])])})}}]);